<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0">
<title>Happy New Year üíõ</title>

<style>
*{margin:0;padding:0;box-sizing:border-box;}
body{
  height:100vh;
  overflow:hidden;
  background:radial-gradient(circle at bottom,#1a1405,#020409);
  font-family:'Segoe UI',sans-serif;
  color:#fff;
}

/* ===== CENTER ===== */
.center{
  position:absolute;
  inset:0;
  display:flex;
  flex-direction:column;
  justify-content:center;
  align-items:center;
  text-align:center;
  z-index:5;
}

#countdown{
  font-size:90px;
  font-weight:800;
  color:#ffd700;
  text-shadow:0 0 40px rgba(255,215,0,.9);
  animation:pulse 1s infinite;
}
@keyframes pulse{
  0%{transform:scale(1);}
  50%{transform:scale(1.15);}
  100%{transform:scale(1);}
}

#name{
  margin-top:14px;
  font-size:38px;
  letter-spacing:2px;
  text-shadow:0 0 20px rgba(255,255,255,.8);
}

/* ===== ENVELOPE ===== */
#envelope{
  display:none;
  position:absolute;
  inset:0;
  z-index:12;
  justify-content:center;
  align-items:center;
  background:rgba(0,0,0,.55);
  backdrop-filter:blur(6px);
}

.envelope-box{
  position:relative;
  width:320px;
  height:220px;
  background:#fff;
  border-radius:10px;
  box-shadow:0 20px 60px rgba(0,0,0,.4);
}

/* SEAL */
.seal{
  position:absolute;
  bottom:55px;
  left:50%;
  transform:translateX(-50%);
  width:64px;
  height:64px;
  background:radial-gradient(circle,#ffe066,#d4a100);
  border-radius:50%;
  display:flex;
  justify-content:center;
  align-items:center;
  cursor:pointer;
  box-shadow:0 0 25px rgba(255,215,0,.9);
  animation:sealPulse 1.5s infinite;
}

.seal span{
  font-size:28px;
}

@keyframes sealPulse{
  0%{transform:translateX(-50%) scale(1);}
  50%{transform:translateX(-50%) scale(1.15);}
  100%{transform:translateX(-50%) scale(1);}
}

/* ===== LETTER ===== */
#letter{
  display:none;
  position:absolute;
  inset:0;
  z-index:15;
  justify-content:center;
  align-items:center;
  background:rgba(0,0,0,.6);
}

.paper{
  position:relative;
  background:#fff;
  color:#333;
  max-width:360px;
  padding:26px;
  border-radius:14px;
  font-family:'Segoe Script','Comic Sans MS',cursive;
  line-height:1.7;
  animation:fadeUp 1.8s ease forwards;
}

.close-btn{
  position:absolute;
  top:10px;
  right:14px;
  font-size:22px;
  cursor:pointer;
  color:#999;
}
.close-btn:hover{color:#000;}

@keyframes fadeUp{
  from{opacity:0;transform:translateY(40px);}
  to{opacity:1;transform:translateY(0);}
}

/* ===== HEART FLOAT ===== */
.heart{
  position:absolute;
  width:14px;
  height:14px;
  background:#ffd700;
  transform:rotate(45deg);
  opacity:.8;
  animation:heartFloat 10s linear forwards;
}
.heart::before,.heart::after{
  content:"";
  position:absolute;
  width:14px;
  height:14px;
  background:#ffd700;
  border-radius:50%;
}
.heart::before{top:-7px;left:0;}
.heart::after{left:-7px;top:0;}

@keyframes heartFloat{
  from{transform:translateY(100vh) rotate(45deg);opacity:0;}
  20%{opacity:1;}
  to{transform:translateY(-15vh) rotate(45deg);opacity:0;}
}

/* MUSIC */
.music-btn{
  position:fixed;
  bottom:20px;
  right:20px;
  z-index:20;
  width:48px;
  height:48px;
  border-radius:50%;
  background:rgba(255,255,255,.15);
  display:flex;
  justify-content:center;
  align-items:center;
  font-size:22px;
  cursor:pointer;
}
.music-btn.active{animation:spin 4s linear infinite;}
@keyframes spin{to{transform:rotate(360deg);}}

/* CANVAS */
canvas{position:absolute;inset:0;}
</style>
</head>

<body>

<audio id="bgm" loop>
  <source src="love.mp3" type="audio/mpeg">
</audio>

<div class="music-btn" id="musicBtn">üéµ</div>

<div class="center">
  <div id="countdown">5</div>
  <div id="name"></div>
</div>

<!-- ENVELOPE -->
<div id="envelope">
  <div class="envelope-box">
    <div class="seal" onclick="openLetter()">
      <span>üíõ</span>
    </div>
  </div>
</div>

<!-- LETTER -->
<div id="letter">
  <div class="paper">
    <div class="close-btn" onclick="closeLetter()">‚úï</div>
    Only ChouChou,<br><br>
    NƒÉm m·ªõi ch√∫c b·∫°n l·ªõn lu√¥n vui v·∫ª v√† h·∫°nh ph√∫c,<br>
    M·ªçi chuy·ªán xui x·∫ªo, kh√¥ng vui ƒëi·ªÅu bi·∫øn ƒëi h·∫øt<br>
    Mong nƒÉm nay c·ªßa b·∫°n l·ªõn s·∫Ω b√¨nh y√™n h∆°n<br>
    V√† mong b·∫°n l·ªõn h√£y lu√¥n nh·ªõ r·∫±ng,<br>
    V·∫´n c√≥ m·ªôt n∆°i b·∫°n l·ªõn kh√¥ng c·∫ßn ph·∫£i ph√≤ng b·ªã<br>
    C·ª© l√†m nh·ªØng ƒëi·ªÅu b·∫°n l·ªõn mu·ªën l√†m n√≥i nh·ªØng ƒëi·ªÅu b·∫°n l·ªõn mu·ªën n√≥i ‚ù§Ô∏è<br><br>
    Happy New Year, My Princess ‚ú®<br>
    Y√™u Ch·ªã üñ§
  </div>
</div>

<canvas id="canvas"></canvas>

<script>
const loverName="Happy New Year, My Princess ‚ú®";

/* MUSIC */
const bgm=document.getElementById("bgm");
const musicBtn=document.getElementById("musicBtn");
let playing=false;
musicBtn.onclick=()=>{
  playing?bgm.pause():bgm.play();
  musicBtn.classList.toggle("active");
  playing=!playing;
};

/* COUNTDOWN */
let count=5;
const cd=document.getElementById("countdown");
const nameEl=document.getElementById("name");

const timer=setInterval(()=>{
  count--;
  cd.textContent=count;
  if(count===0){
    clearInterval(timer);
    cd.style.display="none";
    typeName();
    startFireworks();
    startHearts();
    setTimeout(()=>document.getElementById("envelope").style.display="flex",9000);
  }
},1000);

function typeName(){
  let i=0;
  const t=setInterval(()=>{
    nameEl.textContent+=loverName[i++];
    if(i>=loverName.length)clearInterval(t);
  },160);
}

function openLetter(){
  document.getElementById("envelope").style.display="none";
  document.getElementById("letter").style.display="flex";
}
function closeLetter(){
  document.getElementById("letter").style.display="none";
}

/* HEARTS */
function startHearts(){
  setInterval(()=>{
    const h=document.createElement("div");
    h.className="heart";
    h.style.left=Math.random()*100+"vw";
    document.body.appendChild(h);
    setTimeout(()=>h.remove(),12000);
  },700);
}

/* FIREWORKS GOLD */
const canvas=document.getElementById("canvas");
const ctx=canvas.getContext("2d");
canvas.width=innerWidth;
canvas.height=innerHeight;

let rockets=[],particles=[];
class Rocket{
  constructor(){
    this.x=Math.random()*canvas.width;
    this.y=canvas.height;
    this.vy=-(Math.random()*3+6);
    this.explodeY=Math.random()*canvas.height*0.4;
  }
  update(){
    this.y+=this.vy;
    if(this.y<=this.explodeY){
      explode(this.x,this.y);
      return false;
    }
    return true;
  }
  draw(){
    ctx.fillStyle="#ffd700";
    ctx.fillRect(this.x,this.y,2,6);
  }
}

class Particle{
  constructor(x,y){
    const a=Math.random()*Math.PI*2;
    const s=Math.random()*4+2;
    this.x=x;this.y=y;
    this.vx=Math.cos(a)*s;
    this.vy=Math.sin(a)*s;
    this.life=120;
  }
  update(){
    this.x+=this.vx;
    this.y+=this.vy;
    this.vy+=0.03;
    this.life--;
  }
  draw(){
    ctx.globalAlpha=this.life/120;
    ctx.fillStyle="#ffd700";
    ctx.beginPath();
    ctx.arc(this.x,this.y,2,0,Math.PI*2);
    ctx.fill();
  }
}

function explode(x,y){
  for(let i=0;i<140;i++)particles.push(new Particle(x,y));
}

function animate(){
  ctx.fillStyle="rgba(0,0,0,0.25)";
  ctx.fillRect(0,0,canvas.width,canvas.height);

  rockets=rockets.filter(r=>r.update());
  rockets.forEach(r=>r.draw());

  particles=particles.filter(p=>p.life>0);
  particles.forEach(p=>{p.update();p.draw();});

  requestAnimationFrame(animate);
}
function startFireworks(){
  setInterval(()=>rockets.push(new Rocket()),800);
  animate();
}

addEventListener("resize",()=>{
  canvas.width=innerWidth;
  canvas.height=innerHeight;
});
</script>

</body>
</html>


